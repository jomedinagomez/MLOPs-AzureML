azurerm_resource_group.hub_network_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01]
azurerm_resource_group.prod_workspace_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01]
azurerm_resource_group.dev_registry_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01]
azurerm_resource_group.prod_registry_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01]
data.azurerm_client_config.current: Reading...
azurerm_resource_group.prod_vnet_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01]
azurerm_resource_group.dev_vnet_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01]
azurerm_resource_group.dev_workspace_rg: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01]
data.azurerm_client_config.current: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
azuread_application.deployment_sp_app: Refreshing state... [id=/applications/6ed113ec-b3c9-44de-9381-bc817fa201f5]
azurerm_role_assignment.user_dev_rg_reader[0]: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/5c626ca7-cff8-a423-dca8-66fa9eb5a895]
azurerm_role_assignment.user_prod_rg_reader[0]: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/6adc8453-1e45-8b7c-0299-f4aef9937c30]
azuread_application_password.deployment_sp_secret: Refreshing state... [id=6ed113ec-b3c9-44de-9381-bc817fa201f5/password/d79a29f2-9f0d-42ca-a29a-b4557f211d36]
azuread_service_principal.deployment_sp: Refreshing state... [id=/servicePrincipals/42b09238-98f9-4530-ad34-94361818cb66]
azurerm_role_assignment.sp_hub_network_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Authorization/roleAssignments/303970b8-4777-2dd9-6865-0a13b531205c]
azurerm_role_assignment.sp_dev_registry_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.Authorization/roleAssignments/f808d868-8965-22ba-76f9-5c0f4aaadeef]
azurerm_role_assignment.sp_hub_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Authorization/roleAssignments/9ced65b3-37f8-cf8e-4ec5-45f749b4df53]
azurerm_role_assignment.sp_dev_vnet_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Authorization/roleAssignments/20a96010-70d4-1ffa-9873-018f1d155631]
azurerm_role_assignment.sp_dev_vnet_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Authorization/roleAssignments/565df3c2-73e7-dc07-5c06-add60273280b]
azurerm_role_assignment.sp_dev_workspace_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/5cdce552-1057-106e-c5dc-6db5b8b525a6]
azurerm_role_assignment.sp_prod_vnet_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Authorization/roleAssignments/bae8eddf-9b35-0b81-12ab-9f774e1948a0]
azurerm_role_assignment.sp_prod_registry_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.Authorization/roleAssignments/cbd82d20-0f0b-7d7b-0f60-b975fe4c36e1]
azurerm_role_assignment.sp_prod_workspace_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/56172f0f-a119-31f9-63ed-a7132c541d22]
azurerm_role_assignment.sp_prod_workspace_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/e5d6a32e-517a-e3d8-4f43-ad16cd705326]
azurerm_role_assignment.sp_prod_registry_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.Authorization/roleAssignments/2e210216-c3da-3dfb-ec20-caa7218bac82]
azurerm_role_assignment.sp_prod_vnet_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Authorization/roleAssignments/c59c98ed-dfcc-1ed3-eac8-f2123491d9b8]
azurerm_role_assignment.sp_dev_workspace_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/924220f1-af04-1161-4d52-bc45aa64f773]
azurerm_role_assignment.sp_prod_workspace_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/8ecc3c0a-031c-0347-b50a-84a78fc2a596]
azurerm_role_assignment.sp_dev_vnet_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Authorization/roleAssignments/99d02bbc-b031-81ac-e4eb-7ff0548992da]
azurerm_role_assignment.sp_dev_registry_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.Authorization/roleAssignments/2e1cf394-24fc-0673-12ae-995890f26b3b]
azurerm_role_assignment.sp_dev_workspace_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/b69fb6e0-2ced-c2a5-461e-8253254e1760]
azurerm_role_assignment.sp_prod_vnet_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Authorization/roleAssignments/83b92d6d-bb08-9ea3-9f57-9bf60b9832c5]
azurerm_role_assignment.sp_prod_registry_network_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.Authorization/roleAssignments/3f95487b-dadd-0741-0c8a-87fe4d86b7d7]
azurerm_role_assignment.sp_dev_registry_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.Authorization/roleAssignments/168c2105-b452-27b7-0d92-27ecccf60c42]
azurerm_role_assignment.sp_hub_network_user_access_admin: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Authorization/roleAssignments/edecd8f9-3de0-7d3b-c82a-bc633701a0da]
module.dev_vnet.data.azurerm_client_config.identity_config: Reading...
module.dev_vnet.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.dev_vnet.azurerm_private_dns_zone.aml_api: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.api.azureml.ms]
module.dev_vnet.azurerm_private_dns_zone.keyvault: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.vaultcore.azure.net]
module.dev_vnet.azurerm_virtual_network.aml_vnet: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amldevcc01]
module.dev_vnet.azurerm_private_dns_zone.acr: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.azurecr.io]
module.dev_vnet.azurerm_private_dns_zone.table: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.table.core.windows.net]
module.dev_vnet.azurerm_user_assigned_identity.cc: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev-mi-compute]
module.dev_vnet.azurerm_private_dns_zone.file: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.file.core.windows.net]
module.dev_vnet.azurerm_private_dns_zone.aml_instances: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/instances.azureml.ms]
module.dev_vnet.azurerm_private_dns_zone.blob: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.blob.core.windows.net]
module.dev_vnet.azurerm_private_dns_zone.aml_notebooks: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.notebooks.azure.net]
module.dev_vnet.azurerm_private_dns_zone.queue: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.queue.core.windows.net]
module.dev_vnet.azurerm_log_analytics_workspace.vnet_logs: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.OperationalInsights/workspaces/logdevcc01]
module.dev_vnet.azurerm_subnet.aml_subnet: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amldevcc01/subnets/snet-amldevcc01]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.keyvault_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.vaultcore.azure.net/virtualNetworkLinks/keyvault-vnet-link]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.acr_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.azurecr.io/virtualNetworkLinks/acr-vnet-link]
module.prod_vnet.data.azurerm_client_config.identity_config: Reading...
module.prod_vnet.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.prod_registry.data.azurerm_client_config.identity_config: Reading...
module.prod_registry.data.azurerm_subscription.current: Reading...
module.prod_registry.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.aml_api_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.api.azureml.ms/virtualNetworkLinks/aml-api-vnet-link]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.file_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.file.core.windows.net/virtualNetworkLinks/file-vnet-link]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.blob_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.blob.core.windows.net/virtualNetworkLinks/blob-vnet-link]
module.prod_registry.data.azurerm_subscription.current: Read complete after 0s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.aml_notebooks_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.notebooks.azure.net/virtualNetworkLinks/aml-notebooks-vnet-link]
module.dev_registry.data.azurerm_client_config.identity_config: Reading...
module.dev_registry.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.dev_registry.data.azurerm_subscription.current: Reading...
module.prod_vnet.azurerm_private_dns_zone.aml_notebooks: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.notebooks.azure.net]
module.prod_vnet.azurerm_private_dns_zone.aml_instances: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/instances.azureml.ms]
module.prod_vnet.azurerm_private_dns_zone.acr: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.azurecr.io]
module.prod_vnet.azurerm_private_dns_zone.aml_api: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.api.azureml.ms]
module.dev_registry.data.azurerm_subscription.current: Read complete after 0s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25]
module.prod_vnet.azurerm_private_dns_zone.table: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.table.core.windows.net]
module.prod_vnet.azurerm_private_dns_zone.file: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.file.core.windows.net]
module.prod_vnet.azurerm_private_dns_zone.queue: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.queue.core.windows.net]
module.prod_vnet.azurerm_user_assigned_identity.cc: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/prod-mi-compute]
module.prod_vnet.azurerm_private_dns_zone.keyvault: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.vaultcore.azure.net]
module.prod_vnet.azurerm_private_dns_zone.blob: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.blob.core.windows.net]
module.prod_vnet.azurerm_log_analytics_workspace.vnet_logs: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.OperationalInsights/workspaces/logprodcc01]
module.prod_vnet.azurerm_virtual_network.aml_vnet: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amlprodcc01]
module.dev_vnet.azurerm_monitor_diagnostic_setting.vnet_diagnostics: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amldevcc01|vnet-amldevcc01-diagnostics-dev-01]
module.dev_vnet.null_resource.log_analytics_cleanup[0]: Refreshing state... [id=2936722320508113930]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.table_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.table.core.windows.net/virtualNetworkLinks/table-vnet-link]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.aml_instances_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/instances.azureml.ms/virtualNetworkLinks/aml-instances-vnet-link]
module.dev_vnet.azurerm_private_dns_zone_virtual_network_link.queue_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.queue.core.windows.net/virtualNetworkLinks/queue-vnet-link]
module.prod_registry.azapi_resource.registry: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.acr_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.azurecr.io/virtualNetworkLinks/acr-vnet-link]
module.prod_vnet.azurerm_subnet.aml_subnet: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amlprodcc01/subnets/snet-amlprodcc01]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.aml_instances_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/instances.azureml.ms/virtualNetworkLinks/aml-instances-vnet-link]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.aml_notebooks_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.notebooks.azure.net/virtualNetworkLinks/aml-notebooks-vnet-link]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.aml_api_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.api.azureml.ms/virtualNetworkLinks/aml-api-vnet-link]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.table_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.table.core.windows.net/virtualNetworkLinks/table-vnet-link]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.queue_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.queue.core.windows.net/virtualNetworkLinks/queue-vnet-link]
module.dev_registry.azapi_resource.registry: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.keyvault_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.vaultcore.azure.net/virtualNetworkLinks/keyvault-vnet-link]
module.prod_vnet.azurerm_monitor_diagnostic_setting.vnet_diagnostics: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amlprodcc01|vnet-amlprodcc01-diagnostics-prod-01]
module.prod_vnet.null_resource.log_analytics_cleanup[0]: Refreshing state... [id=3366132046361462162]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.file_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.file.core.windows.net/virtualNetworkLinks/file-vnet-link]
module.dev_managed_umi.data.azurerm_client_config.current: Reading...
module.dev_managed_umi.data.azurerm_client_config.current: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.dev_managed_umi.data.azurerm_client_config.identity_config: Reading...
module.dev_managed_umi.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.dev_managed_umi.data.azurerm_subscription.current: Reading...
module.dev_managed_umi.module.keyvault_aml.data.azurerm_client_config.identity_config: Reading...
module.dev_managed_umi.module.keyvault_aml.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.dev_managed_umi.module.keyvault_aml.data.azurerm_subscription.current: Reading...
module.dev_managed_umi.azurerm_user_assigned_identity.workspace_identity: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev-mi-workspace]
module.dev_managed_umi.azurerm_application_insights.aml-appins: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Insights/components/mlwindevcc01]
module.dev_managed_umi.module.storage_account_default.azurerm_storage_account.storage_account: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01]
module.dev_managed_umi.module.keyvault_aml.data.azurerm_subscription.current: Read complete after 0s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25]
module.dev_managed_umi.module.container_registry.azurerm_container_registry.acr: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ContainerRegistry/registries/crdevcc01]
module.dev_managed_umi.module.keyvault_aml.azurerm_key_vault.kv: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01]
module.prod_vnet.azurerm_private_dns_zone_virtual_network_link.blob_link: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.blob.core.windows.net/virtualNetworkLinks/blob-vnet-link]
module.dev_managed_umi.data.azurerm_subscription.current: Read complete after 1s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25]
module.hub_network.azurerm_public_ip.vpn_gateway_pip: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Network/publicIPAddresses/pip-vpngw-aml-hub-cc01]
module.hub_network.azurerm_virtual_network.hub_vnet: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Network/virtualNetworks/vnet-aml-hub-cc01]
module.hub_network.azurerm_subnet.gateway_subnet: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Network/virtualNetworks/vnet-aml-hub-cc01/subnets/GatewaySubnet]
module.dev_managed_umi.module.container_registry.null_resource.acr_cleanup[0]: Refreshing state... [id=2829065504094347209]
module.dev_managed_umi.module.container_registry.azurerm_monitor_diagnostic_setting.diag-base: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ContainerRegistry/registries/crdevcc01|crdevcc01-diag-base-dev-01]
module.hub_network.azurerm_virtual_network_gateway.vpn_gateway: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Network/virtualNetworkGateways/vpngw-aml-hub-cc01]
module.dev_managed_umi.azurerm_role_assignment.compute_acr_pull: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ContainerRegistry/registries/crdevcc01/providers/Microsoft.Authorization/roleAssignments/78ba1da3-c99b-510d-9617-b10d0553ca49]
module.hub_network.azurerm_virtual_network_peering.hub_to_prod: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Network/virtualNetworks/vnet-aml-hub-cc01/virtualNetworkPeerings/peer-hub-to-prod]
module.hub_network.azurerm_virtual_network_peering.hub_to_dev: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-hub-cc01/providers/Microsoft.Network/virtualNetworks/vnet-aml-hub-cc01/virtualNetworkPeerings/peer-hub-to-dev]
module.dev_managed_umi.azurerm_monitor_diagnostic_setting.appinsights_diagnostics: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Insights/components/mlwindevcc01|mlwindevcc01-diagnostics-dev-01]
module.prod_spoke_peering.azurerm_virtual_network_peering.spoke_to_hub: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amlprodcc01/virtualNetworkPeerings/peer-prod-to-hub]
module.dev_spoke_peering.azurerm_virtual_network_peering.spoke_to_hub: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amldevcc01/virtualNetworkPeerings/peer-dev-to-hub]
module.dev_registry.azurerm_monitor_diagnostic_setting.registry_diagnostics: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01|mlrdevcc01-diagnostics]
module.dev_registry.time_sleep.wait_registry_identity: Refreshing state... [id=2025-08-07T23:25:29Z]
module.dev_registry.module.private_endpoint_aml_registry.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.Network/privateEndpoints/pemlrdevcc01amlregistry]
module.dev_registry.null_resource.registry_managed_resources_diagnostics: Refreshing state... [id=3150804129720263279]
module.dev_managed_umi.azurerm_role_assignment.compute_acr_push: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ContainerRegistry/registries/crdevcc01/providers/Microsoft.Authorization/roleAssignments/883df727-57cb-583b-bb37-5dc225807b16]
module.prod_registry.time_sleep.wait_registry_identity: Refreshing state... [id=2025-08-07T23:26:08Z]
module.prod_registry.azurerm_monitor_diagnostic_setting.registry_diagnostics: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01|mlrprodcc01-diagnostics]
module.prod_registry.module.private_endpoint_aml_registry.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.Network/privateEndpoints/pemlrprodcc01amlregistry]
module.prod_registry.null_resource.registry_managed_resources_diagnostics: Refreshing state... [id=3331436815042795111]
module.dev_managed_umi.module.storage_account_default.null_resource.storage_cleanup[0]: Refreshing state... [id=6236521130509706501]
module.dev_managed_umi.azurerm_role_assignment.blob_perm_default_sa: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/providers/Microsoft.Authorization/roleAssignments/bd36bd0d-414c-5b12-8c24-f80418053d0c]
module.dev_managed_umi.azurerm_role_assignment.file_perm_default_sa: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/providers/Microsoft.Authorization/roleAssignments/5fc8a3a0-0890-53aa-8696-7951a059f950]
module.dev_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-base: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01|stdevcc01-diag-base-dev-01]
module.dev_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-blob: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/blobServices/default|stdevcc01-diag-blob-dev-01]
module.dev_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-file: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/fileServices/default|stdevcc01-diag-file-dev-01]
module.dev_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-queue: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/queueServices/default|stdevcc01-diag-queue-dev-01]
azurerm_role_assignment.user_dev_registry_user[0]: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01/providers/Microsoft.Authorization/roleAssignments/20a9ac6d-ec58-277d-5765-8d66a5bbf957]
module.prod_managed_umi.azurerm_user_assigned_identity.workspace_identity: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/prod-mi-workspace]
module.prod_managed_umi.azurerm_application_insights.aml-appins: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Insights/components/mlwinprodcc01]
module.prod_managed_umi.module.keyvault_aml.azurerm_key_vault.kv: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01]
module.prod_managed_umi.module.container_registry.azurerm_container_registry.acr: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ContainerRegistry/registries/crprodcc01]
module.prod_managed_umi.module.storage_account_default.azurerm_storage_account.storage_account: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01]
module.dev_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-table: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/tableServices/default|stdevcc01-diag-table-dev-01]
module.dev_managed_umi.azurerm_role_assignment.compute_storage_file_privileged_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/providers/Microsoft.Authorization/roleAssignments/d43e10a0-6bf2-5967-ac67-9c623f340c2a]
module.dev_managed_umi.azurerm_role_assignment.compute_storage_blob_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/providers/Microsoft.Authorization/roleAssignments/7ec16821-fbf4-577b-a4bb-66ca51960daa]
module.dev_managed_umi.module.private_endpoint_st_default_blob.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Network/privateEndpoints/pestdevcc01blob]
module.dev_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Refreshing state... [id=4922180291796074832]
module.dev_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01/providers/Microsoft.Authorization/roleAssignments/2b6942af-b2f9-58df-b741-12db3c441552]
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Refreshing state... [id=3917703616690369686]
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01/providers/Microsoft.Authorization/roleAssignments/f35be4e8-154f-5a54-b19c-0506918424db]
module.prod_managed_umi.module.container_registry.null_resource.acr_cleanup[0]: Refreshing state... [id=8514349947834147912]
module.prod_managed_umi.module.container_registry.azurerm_monitor_diagnostic_setting.diag-base: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ContainerRegistry/registries/crprodcc01|crprodcc01-diag-base-prod-01]
azurerm_role_assignment.user_prod_registry_user[0]: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01/providers/Microsoft.Authorization/roleAssignments/3743f013-bfdc-1d3e-7d00-212864854757]
module.dev_managed_umi.module.keyvault_aml.azurerm_monitor_diagnostic_setting.diag-base: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01|kvdevcc01-diagnostics-dev-01]
module.prod_managed_umi.azurerm_role_assignment.compute_acr_pull: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ContainerRegistry/registries/crprodcc01/providers/Microsoft.Authorization/roleAssignments/ea73709b-ca77-5a89-871a-ed110a5787e0]
module.dev_managed_umi.azurerm_role_assignment.rg_reader: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/5199a53e-e144-57fe-be82-800485e03825]
module.dev_managed_umi.azurerm_role_assignment.compute_keyvault_secrets_user: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01/providers/Microsoft.Authorization/roleAssignments/7b729ff9-8447-5956-9ad3-b345c5eddadd]
module.dev_managed_umi.azurerm_role_assignment.workspace_key_vault_secrets_user: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01/providers/Microsoft.Authorization/roleAssignments/99c763bd-7ce4-4299-a39c-4576872f85a1]
module.prod_managed_umi.azurerm_monitor_diagnostic_setting.appinsights_diagnostics: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Insights/components/mlwinprodcc01|mlwinprodcc01-diagnostics-prod-01]
module.prod_managed_umi.module.keyvault_aml.azurerm_monitor_diagnostic_setting.diag-base: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01|kvprodcc01-diagnostics-prod-01]
module.prod_managed_umi.azurerm_role_assignment.workspace_key_vault_secrets_user: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01/providers/Microsoft.Authorization/roleAssignments/40bdf328-6d7e-2db3-cfcc-c6bd8892f325]
module.prod_managed_umi.azurerm_role_assignment.compute_keyvault_secrets_user: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01/providers/Microsoft.Authorization/roleAssignments/543aaf87-2e08-51cf-8c3d-2af93076c190]
module.dev_managed_umi.time_sleep.wait_kv_role_propagation: Refreshing state... [id=2025-08-08T00:07:48Z]
module.dev_managed_umi.azurerm_role_assignment.workspace_storage_blob_owner: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01/providers/Microsoft.Authorization/roleAssignments/ad78fa23-f8e2-54b4-bff0-be71dd3e8951]
module.dev_managed_umi.azurerm_role_assignment.ai_network_connection_approver: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/643a5321-175e-5a9a-bb5c-02750ba0a413]
module.prod_managed_umi.azurerm_role_assignment.compute_acr_push: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ContainerRegistry/registries/crprodcc01/providers/Microsoft.Authorization/roleAssignments/96c53c48-a0cc-5828-b0bb-ce773e40ee6e]
module.prod_managed_umi.time_sleep.wait_kv_role_propagation: Refreshing state... [id=2025-08-08T00:08:26Z]
module.dev_managed_umi.module.private_endpoint_st_default_file.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Network/privateEndpoints/pestdevcc01file]
module.dev_managed_umi.azurerm_role_assignment.ai_administrator: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Authorization/roleAssignments/137713b7-4788-5d70-94b4-a434a713ef20]
module.prod_managed_umi.module.storage_account_default.null_resource.storage_cleanup[0]: Refreshing state... [id=5987642861646202783]
module.prod_managed_umi.azurerm_role_assignment.file_perm_default_sa: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/providers/Microsoft.Authorization/roleAssignments/ccd9f751-99e9-5e00-8db2-455125df12a6]
module.prod_managed_umi.azurerm_role_assignment.blob_perm_default_sa: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/providers/Microsoft.Authorization/roleAssignments/d050dbd9-527b-56a5-99fb-f36bed28f143]
module.prod_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-base: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01|stprodcc01-diag-base-prod-01]
module.prod_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-blob: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/blobServices/default|stprodcc01-diag-blob-prod-01]
module.prod_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-file: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/fileServices/default|stprodcc01-diag-file-prod-01]
module.prod_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-queue: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/queueServices/default|stprodcc01-diag-queue-prod-01]
module.dev_managed_umi.module.private_endpoint_st_default_table.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Network/privateEndpoints/pestdevcc01table]
module.prod_managed_umi.module.storage_account_default.azurerm_monitor_diagnostic_setting.diag-table: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/tableServices/default|stprodcc01-diag-table-prod-01]
module.prod_managed_umi.azurerm_role_assignment.compute_storage_blob_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/providers/Microsoft.Authorization/roleAssignments/a523bed4-e7f5-5948-aa0b-a26ebf2e0303]
module.prod_managed_umi.azurerm_role_assignment.rg_reader: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/cf92e79c-6e81-5d56-ad4d-2fdd43abefbb]
module.prod_managed_umi.azurerm_role_assignment.compute_storage_file_privileged_contributor: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/providers/Microsoft.Authorization/roleAssignments/6c031a24-380f-5dc1-8e64-165150e8f4a8]
module.prod_managed_umi.module.private_endpoint_st_default_blob.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Network/privateEndpoints/pestprodcc01blob]
module.prod_managed_umi.azurerm_role_assignment.workspace_storage_blob_owner: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01/providers/Microsoft.Authorization/roleAssignments/6ab55cc5-23a1-575f-b6b8-df094e481353]
module.prod_managed_umi.azurerm_role_assignment.ai_network_connection_approver: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/50cba73d-03f1-5967-bdf7-20c51bdf3cc7]
module.prod_managed_umi.azurerm_role_assignment.ai_administrator: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Authorization/roleAssignments/3b504061-6cae-5764-920e-9399df6aca3f]
module.dev_managed_umi.module.private_endpoint_st_default_queue.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Network/privateEndpoints/pestdevcc01queue]
module.prod_managed_umi.module.private_endpoint_st_default_file.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Network/privateEndpoints/pestprodcc01file]
module.dev_managed_umi.module.private_endpoint_kv.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Network/privateEndpoints/pekvdevcc01vault]
module.prod_managed_umi.module.private_endpoint_st_default_table.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Network/privateEndpoints/pestprodcc01table]
module.dev_managed_umi.module.private_endpoint_container_registry.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Network/privateEndpoints/pecrdevcc01registry]
module.prod_managed_umi.module.private_endpoint_st_default_queue.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Network/privateEndpoints/pestprodcc01queue]
module.prod_managed_umi.module.private_endpoint_kv.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Network/privateEndpoints/pekvprodcc01vault]
module.prod_managed_umi.module.private_endpoint_container_registry.azurerm_private_endpoint.pe: Refreshing state... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Network/privateEndpoints/pecrprodcc01registry]

Terraform used the selected providers to generate the following execution
plan. Resource actions are indicated with the following symbols:
  + create
  ~ update in-place
-/+ destroy and then create replacement
 <= read (data resources)

Terraform will perform the following actions:

  # azapi_resource.dev_workspace_to_dev_registry_outbound_rule will be created
  + resource "azapi_resource" "dev_workspace_to_dev_registry_outbound_rule" {
      + body                      = {
          + properties = {
              + category    = "UserDefined"
              + destination = {
                  + serviceResourceId = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
                }
              + type        = "PrivateEndpoint"
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + name                      = "AllowDevRegistryAccess"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + type                      = "Microsoft.MachineLearningServices/workspaces/outboundRules@2024-10-01-preview"
    }

  # azapi_resource.prod_workspace_to_dev_registry_outbound_rule will be created
  + resource "azapi_resource" "prod_workspace_to_dev_registry_outbound_rule" {
      + body                      = {
          + properties = {
              + category    = "UserDefined"
              + destination = {
                  + serviceResourceId = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
                }
              + type        = "PrivateEndpoint"
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + name                      = "AllowDevRegistryAccess"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + type                      = "Microsoft.MachineLearningServices/workspaces/outboundRules@2024-10-01-preview"
    }

  # azapi_resource.prod_workspace_to_prod_registry_outbound_rule will be created
  + resource "azapi_resource" "prod_workspace_to_prod_registry_outbound_rule" {
      + body                      = {
          + properties = {
              + category    = "UserDefined"
              + destination = {
                  + serviceResourceId = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01"
                }
              + type        = "PrivateEndpoint"
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + name                      = "AllowProdRegistryAccess"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + type                      = "Microsoft.MachineLearningServices/workspaces/outboundRules@2024-10-01-preview"
    }

  # azurerm_role_assignment.dev_compute_to_dev_registry will be created
  + resource "azurerm_role_assignment" "dev_compute_to_dev_registry" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "b0947a78-47fa-4254-aee1-86102b0e6892"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Registry User"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.dev_workspace_network_connection_approver will be created
  + resource "azurerm_role_assignment" "dev_workspace_network_connection_approver" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "af511538-66b5-49e4-9b98-3401c607c2f3"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Enterprise Network Connection Approver"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.prod_compute_to_dev_registry will be created
  + resource "azurerm_role_assignment" "prod_compute_to_dev_registry" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "9e5657ff-9b7b-4b51-878d-46a443cc9901"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Registry User"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.prod_compute_to_prod_registry will be created
  + resource "azurerm_role_assignment" "prod_compute_to_prod_registry" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "9e5657ff-9b7b-4b51-878d-46a443cc9901"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Registry User"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.prod_workspace_network_connection_approver will be created
  + resource "azurerm_role_assignment" "prod_workspace_network_connection_approver" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "6c587184-1d1c-4dbb-aa2a-e65af87ae24b"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Enterprise Network Connection Approver"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.prod_workspace_to_prod_registry_network_approver will be created
  + resource "azurerm_role_assignment" "prod_workspace_to_prod_registry_network_approver" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "6c587184-1d1c-4dbb-aa2a-e65af87ae24b"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Enterprise Network Connection Approver"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_dev_storage_blob_contributor[0] will be created
  + resource "azurerm_role_assignment" "user_dev_storage_blob_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Storage Blob Data Contributor"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_dev_storage_file_privileged_contributor[0] will be created
  + resource "azurerm_role_assignment" "user_dev_storage_file_privileged_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Storage File Data Privileged Contributor"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_dev_workspace_ai_developer[0] will be created
  + resource "azurerm_role_assignment" "user_dev_workspace_ai_developer" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Developer"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_dev_workspace_compute_operator[0] will be created
  + resource "azurerm_role_assignment" "user_dev_workspace_compute_operator" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Compute Operator"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_dev_workspace_data_scientist[0] will be created
  + resource "azurerm_role_assignment" "user_dev_workspace_data_scientist" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Data Scientist"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_prod_storage_blob_contributor[0] will be created
  + resource "azurerm_role_assignment" "user_prod_storage_blob_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Storage Blob Data Contributor"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_prod_storage_file_privileged_contributor[0] will be created
  + resource "azurerm_role_assignment" "user_prod_storage_file_privileged_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Storage File Data Privileged Contributor"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_prod_workspace_ai_developer[0] will be created
  + resource "azurerm_role_assignment" "user_prod_workspace_ai_developer" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Developer"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_prod_workspace_compute_operator[0] will be created
  + resource "azurerm_role_assignment" "user_prod_workspace_compute_operator" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Compute Operator"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # azurerm_role_assignment.user_prod_workspace_data_scientist[0] will be created
  + resource "azurerm_role_assignment" "user_prod_workspace_data_scientist" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = (known after apply)
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Data Scientist"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.azapi_resource.aml_workspace will be created
  + resource "azapi_resource" "aml_workspace" {
      + body                      = {
          + identity   = {
              + type                   = "UserAssigned"
              + userAssignedIdentities = {
                  + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev-mi-workspace" = {}
                }
            }
          + kind       = "Default"
          + properties = {
              + allowRoleAssignmentOnRG     = true
              + applicationInsights         = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Insights/components/mlwindevcc01"
              + containerRegistry           = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ContainerRegistry/registries/crdevcc01"
              + description                 = "Azure Machine Learning Workspace for testing"
              + keyVault                    = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01"
              + managedNetwork              = {
                  + firewallSku   = "Standard"
                  + isolationMode = "AllowOnlyApprovedOutbound"
                  + outboundRules = {
                      + AllowAnacondaCom                = {
                          + category    = "UserDefined"
                          + destination = "anaconda.com"
                          + type        = "FQDN"
                        }
                      + AllowAnacondaComWildcard        = {
                          + category    = "UserDefined"
                          + destination = "*.anaconda.com"
                          + type        = "FQDN"
                        }
                      + AllowAnacondaOrgWildcard        = {
                          + category    = "UserDefined"
                          + destination = "*.anaconda.org"
                          + type        = "FQDN"
                        }
                      + AllowAzureMLApiWildcard         = {
                          + category    = "UserDefined"
                          + destination = "*.azureml.net"
                          + type        = "FQDN"
                        }
                      + AllowAzureMLStudioWildcard      = {
                          + category    = "UserDefined"
                          + destination = "*.azureml.ms"
                          + type        = "FQDN"
                        }
                      + AllowAzureMLWildcard            = {
                          + category    = "UserDefined"
                          + destination = "*.ml.azure.com"
                          + type        = "FQDN"
                        }
                      + AllowAzureResourceManager       = {
                          + category    = "UserDefined"
                          + destination = "management.azure.com"
                          + type        = "FQDN"
                        }
                      + AllowCdnAuth0Com                = {
                          + category    = "UserDefined"
                          + destination = "cdn.auth0.com"
                          + type        = "FQDN"
                        }
                      + AllowCdnHuggingFaceCo           = {
                          + category    = "UserDefined"
                          + destination = "cdn-lfs.huggingface.co"
                          + type        = "FQDN"
                        }
                      + AllowCodeVisualStudio           = {
                          + category    = "UserDefined"
                          + destination = "code.visualstudio.com"
                          + type        = "FQDN"
                        }
                      + AllowDefaultExpTas              = {
                          + category    = "UserDefined"
                          + destination = "default.exp-tas.com"
                          + type        = "FQDN"
                        }
                      + AllowDockerCloudFlareProduction = {
                          + category    = "UserDefined"
                          + destination = "production.cloudflare.docker.com"
                          + type        = "FQDN"
                        }
                      + AllowDockerComWildcard          = {
                          + category    = "UserDefined"
                          + destination = "*.docker.com"
                          + type        = "FQDN"
                        }
                      + AllowDockerIo                   = {
                          + category    = "UserDefined"
                          + destination = "docker.io"
                          + type        = "FQDN"
                        }
                      + AllowDockerIoWildcard           = {
                          + category    = "UserDefined"
                          + destination = "*.docker.io"
                          + type        = "FQDN"
                        }
                      + AllowGalleryCdnWildcard         = {
                          + category    = "UserDefined"
                          + destination = "*.gallerycdn.vsassets.io"
                          + type        = "FQDN"
                        }
                      + AllowMarketplaceVisualStudio    = {
                          + category    = "UserDefined"
                          + destination = "marketplace.visualstudio.com"
                          + type        = "FQDN"
                        }
                      + AllowPypi                       = {
                          + category    = "UserDefined"
                          + destination = "pypi.org"
                          + type        = "FQDN"
                        }
                      + AllowPythonHostedWildcard       = {
                          + category    = "UserDefined"
                          + destination = "*.pythonhosted.org"
                          + type        = "FQDN"
                        }
                      + AllowRawGithub                  = {
                          + category    = "UserDefined"
                          + destination = "raw.githubusercontent.com"
                          + type        = "FQDN"
                        }
                      + AllowUpdateCodeVisualStudio     = {
                          + category    = "UserDefined"
                          + destination = "update.code.visualstudio.com"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeBlob                 = {
                          + category    = "UserDefined"
                          + destination = "vscode.blob.core.windows.net"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeCndWildcard          = {
                          + category    = "UserDefined"
                          + destination = "*.vscode-cdn.net"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeDevWildcard          = {
                          + category    = "UserDefined"
                          + destination = "*.vscode.dev"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeDownload             = {
                          + category    = "UserDefined"
                          + destination = "vscode.download.prss.microsoft.com"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeExperimentsWildcard  = {
                          + category    = "UserDefined"
                          + destination = "*.vscodeexperiments.azureedge.net"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeUnpkWildcard         = {
                          + category    = "UserDefined"
                          + destination = "*.vscode-unpkg.net"
                          + type        = "FQDN"
                        }
                      + AllowVsMsecndNet                = {
                          + category    = "UserDefined"
                          + destination = "*.vo.msecnd.net"
                          + type        = "FQDN"
                        }
                    }
                }
              + managedNetworkKind          = "V1"
              + name                        = "mlwdevcc01"
              + primaryUserAssignedIdentity = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev-mi-workspace"
              + provisionNetworkNow         = true
              + publicNetworkAccess         = "disabled"
              + storageAccount              = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.Storage/storageAccounts/stdevcc01"
              + systemDatastoresAuthMode    = "identity"
            }
          + tags       = {
              + created_by  = "terraform"
              + deployment  = "hub-spoke-vpn"
              + environment = "development"
              + owner       = "ml-team"
              + project     = "ml-platform"
              + purpose     = "dev"
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + location                  = "canadacentral"
      + name                      = "mlwdevcc01"
      + output                    = (known after apply)
      + parent_id                 = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01"
      + schema_validation_enabled = false
      + tags                      = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "development"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "dev"
        }
      + type                      = "Microsoft.MachineLearningServices/workspaces@2025-04-01-preview"
    }

  # module.dev_managed_umi.azapi_resource.compute_cluster_uami will be created
  + resource "azapi_resource" "compute_cluster_uami" {
      + body                      = {
          + identity   = {
              + type                   = "UserAssigned"
              + userAssignedIdentities = {
                  + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev-mi-compute" = {}
                }
            }
          + properties = {
              + computeType = "AmlCompute"
              + description = "CPU compute cluster with user-assigned managed identity for ML training workloads"
              + properties  = {
                  + enableNodePublicIp          = false
                  + isolatedNetwork             = false
                  + osType                      = "Linux"
                  + remoteLoginPortPublicAccess = "Disabled"
                  + scaleSettings               = {
                      + maxNodeCount                = 4
                      + minNodeCount                = 2
                      + nodeIdleTimeBeforeScaleDown = "PT2M"
                    }
                  + vmSize                      = "Standard_F8s_v2"
                }
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + location                  = "canadacentral"
      + name                      = "cpu-cluster-uami"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + tags                      = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "development"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "dev"
        }
      + type                      = "Microsoft.MachineLearningServices/workspaces/computes@2024-10-01"
    }

  # module.dev_managed_umi.azapi_resource.compute_instance_uami will be created
  + resource "azapi_resource" "compute_instance_uami" {
      + body                      = {
          + identity   = {
              + type                   = "UserAssigned"
              + userAssignedIdentities = {
                  + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/dev-mi-compute" = {}
                }
            }
          + properties = {
              + computeType = "ComputeInstance"
              + description = "Personal compute instance with user-assigned managed identity for interactive ML development"
              + properties  = {
                  + applicationSharingPolicy         = "Personal"
                  + computeInstanceAuthorizationType = "personal"
                  + enableNodePublicIp               = false
                  + personalComputeInstanceSettings  = {
                      + assignedUser = {
                          + objectId = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
                          + tenantId = "450bb9bd-faf4-4a7f-9fc1-f621f35fcea8"
                        }
                    }
                  + sshSettings                      = {
                      + sshPublicAccess = "Disabled"
                    }
                  + vmSize                           = "Standard_F8s_v2"
                }
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + location                  = "canadacentral"
      + name                      = "ci-dev-dev"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + tags                      = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "development"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "dev"
        }
      + type                      = "Microsoft.MachineLearningServices/workspaces/computes@2024-10-01"
    }

  # module.dev_managed_umi.azapi_update_resource.workspace_image_build_config will be created
  + resource "azapi_update_resource" "workspace_image_build_config" {
      + body                    = {
          + properties = {
              + imageBuildCompute = "cpu-cluster-uami"
            }
        }
      + id                      = (known after apply)
      + ignore_casing           = false
      + ignore_missing_property = true
      + name                    = (known after apply)
      + output                  = (known after apply)
      + parent_id               = (known after apply)
      + resource_id             = (known after apply)
      + type                    = "Microsoft.MachineLearningServices/workspaces@2025-04-01-preview"
    }

  # module.dev_managed_umi.azurerm_monitor_diagnostic_setting.ml_workspace_diagnostics will be created
  + resource "azurerm_monitor_diagnostic_setting" "ml_workspace_diagnostics" {
      + id                             = (known after apply)
      + log_analytics_destination_type = (known after apply)
      + log_analytics_workspace_id     = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.OperationalInsights/workspaces/logdevcc01"
      + name                           = "mlwdevcc01-diagnostics-dev-01"
      + target_resource_id             = (known after apply)

      + enabled_log {
          + category       = "AmlComputeClusterEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlComputeClusterNodeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlComputeCpuGpuUtilization"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlComputeJobEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlRunStatusChangedEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ComputeInstanceEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataLabelChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataLabelReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataSetChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataSetReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataStoreChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataStoreReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DeploymentEventACI"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DeploymentEventAKS"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DeploymentReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "EnvironmentChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "EnvironmentReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "InferencingOperationACI"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "InferencingOperationAKS"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ModelsActionEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ModelsChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ModelsReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "PipelineChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "PipelineReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "RunEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "RunReadEvent"
            # (1 unchanged attribute hidden)
        }

      + enabled_metric {
          + category = "AllMetrics"
        }

      + metric (known after apply)
    }

  # module.dev_managed_umi.azurerm_private_dns_a_record.aml_workspace_compute_instance will be created
  + resource "azurerm_private_dns_a_record" "aml_workspace_compute_instance" {
      + fqdn                = (known after apply)
      + id                  = (known after apply)
      + name                = "*.canadacentral"
      + records             = (known after apply)
      + resource_group_name = "rg-aml-vnet-dev-cc01"
      + ttl                 = 10
      + zone_name           = "instances.azureml.ms"
    }

  # module.dev_managed_umi.azurerm_role_assignment.compute_ml_data_scientist will be created
  + resource "azurerm_role_assignment" "compute_ml_data_scientist" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "89627899-5ace-5756-95da-ab7d36797d99"
      + principal_id                     = "b0947a78-47fa-4254-aee1-86102b0e6892"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Data Scientist"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.azurerm_role_assignment.compute_rg_reader will be created
  + resource "azurerm_role_assignment" "compute_rg_reader" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "25f690fe-a193-5914-804b-5efbfa2b4117"
      + principal_id                     = "b0947a78-47fa-4254-aee1-86102b0e6892"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Reader"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.azurerm_role_assignment.compute_workspace_contributor will be created
  + resource "azurerm_role_assignment" "compute_workspace_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "36fd4cc3-a1ed-5196-b006-9873fdb37ae5"
      + principal_id                     = "b0947a78-47fa-4254-aee1-86102b0e6892"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Contributor"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.azurerm_role_assignment.wk_perm_ai_developer will be created
  + resource "azurerm_role_assignment" "wk_perm_ai_developer" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "66dc5c53-28c3-58c1-8b65-1489e22886f7"
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Developer"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.azurerm_role_assignment.wk_perm_compute_operator will be created
  + resource "azurerm_role_assignment" "wk_perm_compute_operator" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "3be5e3f8-618c-573d-9354-8d5504290c5a"
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Compute Operator"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.azurerm_role_assignment.wk_perm_data_scientist will be created
  + resource "azurerm_role_assignment" "wk_perm_data_scientist" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "c78a0e8d-bc31-5cb9-b467-eed7756c076b"
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Data Scientist"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.dev_managed_umi.time_sleep.wait_for_compute_resources will be created
  + resource "time_sleep" "wait_for_compute_resources" {
      + create_duration = "180s"
      + id              = (known after apply)
    }

  # module.dev_registry.azapi_resource.registry will be updated in-place
  ~ resource "azapi_resource" "registry" {
        id                        = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01"
        name                      = "mlrdevcc01"
      ~ output                    = {
          - identity = {
              - principalId = "7050d89b-f3a4-4ecb-9572-563ac7e82f18"
            }
        } -> (known after apply)
      ~ tags                      = {
            "created_by"  = "terraform"
          - "deployment"  = "hub-spoke-vpn" -> null
          - "environment" = "development" -> null
          - "owner"       = "ml-team" -> null
          - "project"     = "ml-platform" -> null
          - "purpose"     = "dev" -> null
        }
        # (8 unchanged attributes hidden)
    }

  # module.prod_managed_umi.data.azurerm_client_config.current will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "azurerm_client_config" "current" {
      + client_id       = (known after apply)
      + id              = (known after apply)
      + object_id       = (known after apply)
      + subscription_id = (known after apply)
      + tenant_id       = (known after apply)
    }

  # module.prod_managed_umi.data.azurerm_client_config.identity_config will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "azurerm_client_config" "identity_config" {
      + client_id       = (known after apply)
      + id              = (known after apply)
      + object_id       = (known after apply)
      + subscription_id = (known after apply)
      + tenant_id       = (known after apply)
    }

  # module.prod_managed_umi.data.azurerm_subscription.current will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "azurerm_subscription" "current" {
      + display_name          = (known after apply)
      + id                    = (known after apply)
      + location_placement_id = (known after apply)
      + quota_id              = (known after apply)
      + spending_limit        = (known after apply)
      + state                 = (known after apply)
      + subscription_id       = (known after apply)
      + tags                  = (known after apply)
      + tenant_id             = (known after apply)
    }

  # module.prod_managed_umi.azapi_resource.aml_workspace will be created
  + resource "azapi_resource" "aml_workspace" {
      + body                      = {
          + identity   = {
              + type                   = "UserAssigned"
              + userAssignedIdentities = {
                  + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/prod-mi-workspace" = {}
                }
            }
          + kind       = "Default"
          + properties = {
              + allowRoleAssignmentOnRG     = true
              + applicationInsights         = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Insights/components/mlwinprodcc01"
              + containerRegistry           = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ContainerRegistry/registries/crprodcc01"
              + description                 = "Azure Machine Learning Workspace for testing"
              + keyVault                    = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01"
              + managedNetwork              = {
                  + firewallSku   = "Standard"
                  + isolationMode = "AllowOnlyApprovedOutbound"
                  + outboundRules = {
                      + AllowAnacondaCom                = {
                          + category    = "UserDefined"
                          + destination = "anaconda.com"
                          + type        = "FQDN"
                        }
                      + AllowAnacondaComWildcard        = {
                          + category    = "UserDefined"
                          + destination = "*.anaconda.com"
                          + type        = "FQDN"
                        }
                      + AllowAnacondaOrgWildcard        = {
                          + category    = "UserDefined"
                          + destination = "*.anaconda.org"
                          + type        = "FQDN"
                        }
                      + AllowAzureMLApiWildcard         = {
                          + category    = "UserDefined"
                          + destination = "*.azureml.net"
                          + type        = "FQDN"
                        }
                      + AllowAzureMLStudioWildcard      = {
                          + category    = "UserDefined"
                          + destination = "*.azureml.ms"
                          + type        = "FQDN"
                        }
                      + AllowAzureMLWildcard            = {
                          + category    = "UserDefined"
                          + destination = "*.ml.azure.com"
                          + type        = "FQDN"
                        }
                      + AllowAzureResourceManager       = {
                          + category    = "UserDefined"
                          + destination = "management.azure.com"
                          + type        = "FQDN"
                        }
                      + AllowCdnAuth0Com                = {
                          + category    = "UserDefined"
                          + destination = "cdn.auth0.com"
                          + type        = "FQDN"
                        }
                      + AllowCdnHuggingFaceCo           = {
                          + category    = "UserDefined"
                          + destination = "cdn-lfs.huggingface.co"
                          + type        = "FQDN"
                        }
                      + AllowCodeVisualStudio           = {
                          + category    = "UserDefined"
                          + destination = "code.visualstudio.com"
                          + type        = "FQDN"
                        }
                      + AllowDefaultExpTas              = {
                          + category    = "UserDefined"
                          + destination = "default.exp-tas.com"
                          + type        = "FQDN"
                        }
                      + AllowDockerCloudFlareProduction = {
                          + category    = "UserDefined"
                          + destination = "production.cloudflare.docker.com"
                          + type        = "FQDN"
                        }
                      + AllowDockerComWildcard          = {
                          + category    = "UserDefined"
                          + destination = "*.docker.com"
                          + type        = "FQDN"
                        }
                      + AllowDockerIo                   = {
                          + category    = "UserDefined"
                          + destination = "docker.io"
                          + type        = "FQDN"
                        }
                      + AllowDockerIoWildcard           = {
                          + category    = "UserDefined"
                          + destination = "*.docker.io"
                          + type        = "FQDN"
                        }
                      + AllowGalleryCdnWildcard         = {
                          + category    = "UserDefined"
                          + destination = "*.gallerycdn.vsassets.io"
                          + type        = "FQDN"
                        }
                      + AllowMarketplaceVisualStudio    = {
                          + category    = "UserDefined"
                          + destination = "marketplace.visualstudio.com"
                          + type        = "FQDN"
                        }
                      + AllowPypi                       = {
                          + category    = "UserDefined"
                          + destination = "pypi.org"
                          + type        = "FQDN"
                        }
                      + AllowPythonHostedWildcard       = {
                          + category    = "UserDefined"
                          + destination = "*.pythonhosted.org"
                          + type        = "FQDN"
                        }
                      + AllowRawGithub                  = {
                          + category    = "UserDefined"
                          + destination = "raw.githubusercontent.com"
                          + type        = "FQDN"
                        }
                      + AllowUpdateCodeVisualStudio     = {
                          + category    = "UserDefined"
                          + destination = "update.code.visualstudio.com"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeBlob                 = {
                          + category    = "UserDefined"
                          + destination = "vscode.blob.core.windows.net"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeCndWildcard          = {
                          + category    = "UserDefined"
                          + destination = "*.vscode-cdn.net"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeDevWildcard          = {
                          + category    = "UserDefined"
                          + destination = "*.vscode.dev"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeDownload             = {
                          + category    = "UserDefined"
                          + destination = "vscode.download.prss.microsoft.com"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeExperimentsWildcard  = {
                          + category    = "UserDefined"
                          + destination = "*.vscodeexperiments.azureedge.net"
                          + type        = "FQDN"
                        }
                      + AllowVsCodeUnpkWildcard         = {
                          + category    = "UserDefined"
                          + destination = "*.vscode-unpkg.net"
                          + type        = "FQDN"
                        }
                      + AllowVsMsecndNet                = {
                          + category    = "UserDefined"
                          + destination = "*.vo.msecnd.net"
                          + type        = "FQDN"
                        }
                    }
                }
              + managedNetworkKind          = "V1"
              + name                        = "mlwprodcc01"
              + primaryUserAssignedIdentity = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/prod-mi-workspace"
              + provisionNetworkNow         = true
              + publicNetworkAccess         = "disabled"
              + storageAccount              = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.Storage/storageAccounts/stprodcc01"
              + systemDatastoresAuthMode    = "identity"
            }
          + tags       = {
              + created_by  = "terraform"
              + deployment  = "hub-spoke-vpn"
              + environment = "production"
              + owner       = "ml-team"
              + project     = "ml-platform"
              + purpose     = "prod"
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + location                  = "canadacentral"
      + name                      = "mlwprodcc01"
      + output                    = (known after apply)
      + parent_id                 = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01"
      + schema_validation_enabled = false
      + tags                      = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "production"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "prod"
        }
      + type                      = "Microsoft.MachineLearningServices/workspaces@2025-04-01-preview"
    }

  # module.prod_managed_umi.azapi_resource.compute_cluster_uami will be created
  + resource "azapi_resource" "compute_cluster_uami" {
      + body                      = {
          + identity   = {
              + type                   = "UserAssigned"
              + userAssignedIdentities = {
                  + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/prod-mi-compute" = {}
                }
            }
          + properties = {
              + computeType = "AmlCompute"
              + description = "CPU compute cluster with user-assigned managed identity for ML training workloads"
              + properties  = {
                  + enableNodePublicIp          = false
                  + isolatedNetwork             = false
                  + osType                      = "Linux"
                  + remoteLoginPortPublicAccess = "Disabled"
                  + scaleSettings               = {
                      + maxNodeCount                = 4
                      + minNodeCount                = 2
                      + nodeIdleTimeBeforeScaleDown = "PT2M"
                    }
                  + vmSize                      = "Standard_F8s_v2"
                }
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + location                  = "canadacentral"
      + name                      = "cpu-cluster-uami"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + tags                      = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "production"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "prod"
        }
      + type                      = "Microsoft.MachineLearningServices/workspaces/computes@2024-10-01"
    }

  # module.prod_managed_umi.azapi_resource.compute_instance_uami will be created
  + resource "azapi_resource" "compute_instance_uami" {
      + body                      = {
          + identity   = {
              + type                   = "UserAssigned"
              + userAssignedIdentities = {
                  + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.ManagedIdentity/userAssignedIdentities/prod-mi-compute" = {}
                }
            }
          + properties = {
              + computeType = "ComputeInstance"
              + description = "Personal compute instance with user-assigned managed identity for interactive ML development"
              + properties  = {
                  + applicationSharingPolicy         = "Personal"
                  + computeInstanceAuthorizationType = "personal"
                  + enableNodePublicIp               = false
                  + personalComputeInstanceSettings  = {
                      + assignedUser = {
                          + objectId = (known after apply)
                          + tenantId = (known after apply)
                        }
                    }
                  + sshSettings                      = {
                      + sshPublicAccess = "Disabled"
                    }
                  + vmSize                           = "Standard_F8s_v2"
                }
            }
        }
      + id                        = (known after apply)
      + ignore_casing             = false
      + ignore_missing_property   = true
      + location                  = "canadacentral"
      + name                      = "ci-dev-prod"
      + output                    = (known after apply)
      + parent_id                 = (known after apply)
      + schema_validation_enabled = true
      + tags                      = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "production"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "prod"
        }
      + type                      = "Microsoft.MachineLearningServices/workspaces/computes@2024-10-01"
    }

  # module.prod_managed_umi.azapi_update_resource.workspace_image_build_config will be created
  + resource "azapi_update_resource" "workspace_image_build_config" {
      + body                    = {
          + properties = {
              + imageBuildCompute = "cpu-cluster-uami"
            }
        }
      + id                      = (known after apply)
      + ignore_casing           = false
      + ignore_missing_property = true
      + name                    = (known after apply)
      + output                  = (known after apply)
      + parent_id               = (known after apply)
      + resource_id             = (known after apply)
      + type                    = "Microsoft.MachineLearningServices/workspaces@2025-04-01-preview"
    }

  # module.prod_managed_umi.azurerm_monitor_diagnostic_setting.ml_workspace_diagnostics will be created
  + resource "azurerm_monitor_diagnostic_setting" "ml_workspace_diagnostics" {
      + id                             = (known after apply)
      + log_analytics_destination_type = (known after apply)
      + log_analytics_workspace_id     = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.OperationalInsights/workspaces/logprodcc01"
      + name                           = "mlwprodcc01-diagnostics-prod-01"
      + target_resource_id             = (known after apply)

      + enabled_log {
          + category       = "AmlComputeClusterEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlComputeClusterNodeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlComputeCpuGpuUtilization"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlComputeJobEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "AmlRunStatusChangedEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ComputeInstanceEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataLabelChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataLabelReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataSetChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataSetReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataStoreChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DataStoreReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DeploymentEventACI"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DeploymentEventAKS"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "DeploymentReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "EnvironmentChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "EnvironmentReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "InferencingOperationACI"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "InferencingOperationAKS"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ModelsActionEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ModelsChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "ModelsReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "PipelineChangeEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "PipelineReadEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "RunEvent"
            # (1 unchanged attribute hidden)
        }
      + enabled_log {
          + category       = "RunReadEvent"
            # (1 unchanged attribute hidden)
        }

      + enabled_metric {
          + category = "AllMetrics"
        }

      + metric (known after apply)
    }

  # module.prod_managed_umi.azurerm_private_dns_a_record.aml_workspace_compute_instance will be created
  + resource "azurerm_private_dns_a_record" "aml_workspace_compute_instance" {
      + fqdn                = (known after apply)
      + id                  = (known after apply)
      + name                = "*.canadacentral"
      + records             = (known after apply)
      + resource_group_name = "rg-aml-vnet-prod-cc01"
      + ttl                 = 10
      + zone_name           = "instances.azureml.ms"
    }

  # module.prod_managed_umi.azurerm_role_assignment.compute_ml_data_scientist will be created
  + resource "azurerm_role_assignment" "compute_ml_data_scientist" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "baf5a3c3-2bdc-53da-afe2-4f61af8ebe3b"
      + principal_id                     = "9e5657ff-9b7b-4b51-878d-46a443cc9901"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Data Scientist"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.prod_managed_umi.azurerm_role_assignment.compute_rg_reader will be created
  + resource "azurerm_role_assignment" "compute_rg_reader" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "d4400c5b-ab04-5c4c-a637-292c376f2a60"
      + principal_id                     = "9e5657ff-9b7b-4b51-878d-46a443cc9901"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Reader"
      + scope                            = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01"
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.prod_managed_umi.azurerm_role_assignment.compute_workspace_contributor will be created
  + resource "azurerm_role_assignment" "compute_workspace_contributor" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "aa225b08-f86c-5914-8f47-667056e2ed23"
      + principal_id                     = "9e5657ff-9b7b-4b51-878d-46a443cc9901"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Contributor"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.prod_managed_umi.azurerm_role_assignment.wk_perm_ai_developer will be created
  + resource "azurerm_role_assignment" "wk_perm_ai_developer" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "53e81ca9-aed7-5450-b3c1-600c5b07a6d8"
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "Azure AI Developer"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.prod_managed_umi.azurerm_role_assignment.wk_perm_compute_operator will be created
  + resource "azurerm_role_assignment" "wk_perm_compute_operator" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "6c99f50a-1dbe-56d6-a478-381da479e94d"
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Compute Operator"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.prod_managed_umi.azurerm_role_assignment.wk_perm_data_scientist will be created
  + resource "azurerm_role_assignment" "wk_perm_data_scientist" {
      + condition_version                = (known after apply)
      + id                               = (known after apply)
      + name                             = "3115b896-ed84-5c8b-9211-7d2c10bc1b63"
      + principal_id                     = "151ea030-5798-42a0-a35d-5e7596c1bd6e"
      + principal_type                   = (known after apply)
      + role_definition_id               = (known after apply)
      + role_definition_name             = "AzureML Data Scientist"
      + scope                            = (known after apply)
      + skip_service_principal_aad_check = (known after apply)
    }

  # module.prod_managed_umi.time_sleep.wait_for_compute_resources will be created
  + resource "time_sleep" "wait_for_compute_resources" {
      + create_duration = "180s"
      + id              = (known after apply)
    }

  # module.prod_registry.azapi_resource.registry will be updated in-place
  ~ resource "azapi_resource" "registry" {
        id                        = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01"
        name                      = "mlrprodcc01"
      ~ output                    = {
          - identity = {
              - principalId = "55271706-2f70-4765-8cc2-df6cd1954a01"
            }
        } -> (known after apply)
      ~ tags                      = {
            "created_by"  = "terraform"
          - "deployment"  = "hub-spoke-vpn" -> null
          - "environment" = "production" -> null
          - "owner"       = "ml-team" -> null
          - "project"     = "ml-platform" -> null
          - "purpose"     = "prod" -> null
        }
        # (8 unchanged attributes hidden)
    }

  # module.dev_managed_umi.module.private_endpoint_aml_workspace.azurerm_private_endpoint.pe will be created
  + resource "azurerm_private_endpoint" "pe" {
      + custom_dns_configs            = (known after apply)
      + custom_network_interface_name = "nicpemlwdevcc01amlworkspace"
      + id                            = (known after apply)
      + location                      = "canadacentral"
      + name                          = "pemlwdevcc01amlworkspace"
      + network_interface             = (known after apply)
      + private_dns_zone_configs      = (known after apply)
      + resource_group_name           = "rg-aml-ws-dev-cc01"
      + subnet_id                     = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amldevcc01/subnets/snet-amldevcc01"
      + tags                          = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "development"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "dev"
        }

      + private_dns_zone_group {
          + id                   = (known after apply)
          + name                 = "pezgcmlwdevcc01"
          + private_dns_zone_ids = [
              + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.api.azureml.ms",
              + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-dev-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.notebooks.azure.net",
            ]
        }

      + private_service_connection {
          + is_manual_connection           = false
          + name                           = "pecmlwdevcc01amlworkspace"
          + private_connection_resource_id = (known after apply)
          + private_ip_address             = (known after apply)
          + subresource_names              = [
              + "amlworkspace",
            ]
        }
    }

  # module.prod_managed_umi.module.keyvault_aml.data.azurerm_client_config.identity_config will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "azurerm_client_config" "identity_config" {
      + client_id       = (known after apply)
      + id              = (known after apply)
      + object_id       = (known after apply)
      + subscription_id = (known after apply)
      + tenant_id       = (known after apply)
    }

  # module.prod_managed_umi.module.keyvault_aml.data.azurerm_subscription.current will be read during apply
  # (depends on a resource or a module with changes pending)
 <= data "azurerm_subscription" "current" {
      + display_name          = (known after apply)
      + id                    = (known after apply)
      + location_placement_id = (known after apply)
      + quota_id              = (known after apply)
      + spending_limit        = (known after apply)
      + state                 = (known after apply)
      + subscription_id       = (known after apply)
      + tags                  = (known after apply)
      + tenant_id             = (known after apply)
    }

  # module.prod_managed_umi.module.keyvault_aml.azurerm_key_vault.kv will be updated in-place
  ~ resource "azurerm_key_vault" "kv" {
        id                              = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01"
        name                            = "kvprodcc01"
        tags                            = {
            "created_by"  = "terraform"
            "deployment"  = "hub-spoke-vpn"
            "environment" = "production"
            "owner"       = "ml-team"
            "project"     = "ml-platform"
            "purpose"     = "prod"
        }
      ~ tenant_id                       = "450bb9bd-faf4-4a7f-9fc1-f621f35fcea8" -> (known after apply)
        # (12 unchanged attributes hidden)

        # (1 unchanged block hidden)
    }

  # module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0] must be replaced
-/+ resource "azurerm_role_assignment" "assign-admin" {
      + condition_version                      = (known after apply)
      ~ id                                     = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01/providers/Microsoft.Authorization/roleAssignments/f35be4e8-154f-5a54-b19c-0506918424db" -> (known after apply)
        name                                   = "f35be4e8-154f-5a54-b19c-0506918424db"
      ~ principal_type                         = "User" -> (known after apply)
      ~ role_definition_id                     = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/providers/Microsoft.Authorization/roleDefinitions/00482a5a-887f-4fb3-b363-3b7fe8e74483" -> (known after apply)
      ~ scope                                  = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01" -> (known after apply) # forces replacement
      + skip_service_principal_aad_check       = (known after apply)
        # (5 unchanged attributes hidden)
    }

  # module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0] will be replaced due to changes in replace_triggered_by
-/+ resource "null_resource" "keyvault_purge" {
      ~ id       = "3917703616690369686" -> (known after apply)
        # (1 unchanged attribute hidden)
    }

  # module.prod_managed_umi.module.private_endpoint_aml_workspace.azurerm_private_endpoint.pe will be created
  + resource "azurerm_private_endpoint" "pe" {
      + custom_dns_configs            = (known after apply)
      + custom_network_interface_name = "nicpemlwprodcc01amlworkspace"
      + id                            = (known after apply)
      + location                      = "canadacentral"
      + name                          = "pemlwprodcc01amlworkspace"
      + network_interface             = (known after apply)
      + private_dns_zone_configs      = (known after apply)
      + resource_group_name           = "rg-aml-ws-prod-cc01"
      + subnet_id                     = "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/virtualNetworks/vnet-amlprodcc01/subnets/snet-amlprodcc01"
      + tags                          = {
          + "created_by"  = "terraform"
          + "deployment"  = "hub-spoke-vpn"
          + "environment" = "production"
          + "owner"       = "ml-team"
          + "project"     = "ml-platform"
          + "purpose"     = "prod"
        }

      + private_dns_zone_group {
          + id                   = (known after apply)
          + name                 = "pezgcmlwprodcc01"
          + private_dns_zone_ids = [
              + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.api.azureml.ms",
              + "/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-vnet-prod-cc01/providers/Microsoft.Network/privateDnsZones/privatelink.notebooks.azure.net",
            ]
        }

      + private_service_connection {
          + is_manual_connection           = false
          + name                           = "pecmlwprodcc01amlworkspace"
          + private_connection_resource_id = (known after apply)
          + private_ip_address             = (known after apply)
          + subresource_names              = [
              + "amlworkspace",
            ]
        }
    }

Plan: 49 to add, 3 to change, 2 to destroy.

Changes to Outputs:
  + dev_workspace_id                 = (known after apply)
  + platform_deployment_summary      = {
      + deployment_timestamp  = (known after apply)
      + environment_config    = {
          + development = {
              + auto_purge_enabled    = true
              + cross_env_rbac        = false
              + purpose               = "dev"
              + subnet_address_prefix = "10.1.1.0/24"
              + vnet_address_space    = "10.1.0.0/16"
            }
          + production  = {
              + auto_purge_enabled    = false
              + cross_env_rbac        = true
              + purpose               = "prod"
              + subnet_address_prefix = "10.2.1.0/24"
              + vnet_address_space    = "10.2.0.0/16"
            }
        }
      + environments_deployed = [
          + "development",
          + "production",
        ]
      + key_endpoints         = {
          + development = {
              + container_registry = "crdevcc01.azurecr.io"
              + key_vault          = "https://kvdevcc01.vault.azure.net"
              + registry_endpoint  = "https://mlrdevcc01.registry.azureml.ms"
              + storage_account    = "https://stdevcc01.blob.core.windows.net"
              + workspace_endpoint = "https://mlwdevcc01.api.azureml.ms"
            }
          + production  = {
              + container_registry = "crprodcc01.azurecr.io"
              + key_vault          = "https://kvprodcc01.vault.azure.net"
              + registry_endpoint  = "https://mlrprodcc01.registry.azureml.ms"
              + storage_account    = "https://stprodcc01.blob.core.windows.net"
              + workspace_endpoint = "https://mlwprodcc01.api.azureml.ms"
            }
        }
      + region                = "canadacentral"
      + region_code           = "cc"
      + resource_naming       = {
          + example_dev  = "mlwdevcc01"
          + example_prod = "mlwprodcc01"
          + pattern      = "[prefix][service][purpose][location_code][naming_suffix]"
        }
      + service_principal     = {
          + application_id = "78a4e899-0380-43c2-baab-233efbded6f3"
          + name           = "sp-aml-deployment-platform"
        }
      + terraform_version     = "~> 1.0"
    }
  + prod_workspace_id                = (known after apply)
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Destroying... [id=3917703616690369686]
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Provisioning with 'local-exec'...
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0] (local-exec): Executing: ["PowerShell" "-Command" "try {\r\n  az keyvault purge --name kvprodcc01 --location canadacentral\r\n  Write-Host \"Key Vault kvprodcc01 purged successfully\"\r\n} catch {\r\n  Write-Host \"Key Vault already purged or not found: kvprodcc01\"\r\n}\r\n"]
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0] (local-exec): ERROR: (DeletedVaultNotFound) The specified deleted vault 'kvprodcc01' does not exist. Ensure that the vault was indeed deleted and that it is in recoverable state. If soft delete was not enabled then the vault is permanently deleted. Follow this link for more information: https://go.microsoft.com/fwlink/?linkid=2149745
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0] (local-exec): Code: DeletedVaultNotFound
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0] (local-exec): Message: The specified deleted vault 'kvprodcc01' does not exist. Ensure that the vault was indeed deleted and that it is in recoverable state. If soft delete was not enabled then the vault is permanently deleted. Follow this link for more information: https://go.microsoft.com/fwlink/?linkid=2149745
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0] (local-exec): Key Vault kvprodcc01 purged successfully
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Destruction complete after 3s
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Destroying... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01/providers/Microsoft.Authorization/roleAssignments/f35be4e8-154f-5a54-b19c-0506918424db]
module.dev_managed_umi.azapi_resource.aml_workspace: Creating...
module.prod_registry.azapi_resource.registry: Modifying... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01]
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Destruction complete after 2s
module.dev_registry.azapi_resource.registry: Modifying... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01]
module.prod_registry.azapi_resource.registry: Still modifying... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-...earningServices/registries/mlrprodcc01, 10s elapsed]
module.dev_registry.azapi_resource.registry: Still modifying... [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-...LearningServices/registries/mlrdevcc01, 10s elapsed]
module.prod_registry.azapi_resource.registry: Modifications complete after 14s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-prod-cc01/providers/Microsoft.MachineLearningServices/registries/mlrprodcc01]
module.dev_registry.azapi_resource.registry: Modifications complete after 14s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-reg-dev-cc01/providers/Microsoft.MachineLearningServices/registries/mlrdevcc01]
module.prod_managed_umi.data.azurerm_client_config.identity_config: Reading...
module.prod_managed_umi.module.keyvault_aml.data.azurerm_client_config.identity_config: Reading...
module.prod_managed_umi.data.azurerm_subscription.current: Reading...
module.prod_managed_umi.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.prod_managed_umi.data.azurerm_client_config.current: Reading...
module.prod_managed_umi.module.keyvault_aml.data.azurerm_subscription.current: Reading...
module.prod_managed_umi.module.keyvault_aml.data.azurerm_client_config.identity_config: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.prod_managed_umi.data.azurerm_client_config.current: Read complete after 0s [id=Y2xpZW50Q29uZmlncy9jbGllbnRJZD0wNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDY7b2JqZWN0SWQ9MTUxZWEwMzAtNTc5OC00MmEwLWEzNWQtNWU3NTk2YzFiZDZlO3N1YnNjcmlwdGlvbklkPTU3ODRiNmE1LWRlM2YtNGZhNC04YjhmLWU1YmI3MGZmNmIyNTt0ZW5hbnRJZD00NTBiYjliZC1mYWY0LTRhN2YtOWZjMS1mNjIxZjM1ZmNlYTg=]
module.prod_managed_umi.data.azurerm_subscription.current: Read complete after 0s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25]
module.prod_managed_umi.module.keyvault_aml.data.azurerm_subscription.current: Read complete after 0s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25]
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Creating...
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Creating...
module.prod_managed_umi.module.keyvault_aml.null_resource.keyvault_purge[0]: Creation complete after 0s [id=7180421313221198496]
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Still creating... [10s elapsed]
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Still creating... [20s elapsed]
module.prod_managed_umi.module.keyvault_aml.azurerm_role_assignment.assign-admin[0]: Creation complete after 23s [id=/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01/providers/Microsoft.Authorization/roleAssignments/f35be4e8-154f-5a54-b19c-0506918424db]
module.prod_managed_umi.azapi_resource.aml_workspace: Creating...

Error: Failed to create/update resource

  with module.dev_managed_umi.azapi_resource.aml_workspace,
  on modules\aml-managed-umi\main.tf line 143, in resource "azapi_resource" "aml_workspace":
 143: resource "azapi_resource" "aml_workspace" {

creating/updating Resource: (ResourceId
"/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.MachineLearningServices/workspaces/mlwdevcc01"
/ Api Version "2025-04-01-preview"): GET
https://management.azure.com/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/providers/Microsoft.MachineLearningServices/locations/canadacentral/workspaceOperationsStatus/vYkSL9n6_yiQ96xJiscKjG5HVF-R_gOW-XAyjE0VlXI
--------------------------------------------------------------------------------
RESPONSE 200: 200 OK
ERROR CODE: BadRequest
--------------------------------------------------------------------------------
{
  "status": "Failed",
  "error": {
    "code": "BadRequest",
    "message": "User assigned identity doesn't have enough permissions. Details: The client 'af511538-66b5-49e4-9b98-3401c607c2f3' with object id 'af511538-66b5-49e4-9b98-3401c607c2f3' does not have authorization to perform action 'Microsoft.KeyVault/vaults/read' over scope '/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-dev-cc01/providers/Microsoft.KeyVault/vaults/kvdevcc01' or the scope is invalid. If access was recently granted, please refresh your credentials."
  }
}
--------------------------------------------------------------------------------


Error: Failed to create/update resource

  with module.prod_managed_umi.azapi_resource.aml_workspace,
  on modules\aml-managed-umi\main.tf line 143, in resource "azapi_resource" "aml_workspace":
 143: resource "azapi_resource" "aml_workspace" {

creating/updating Resource: (ResourceId
"/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.MachineLearningServices/workspaces/mlwprodcc01"
/ Api Version "2025-04-01-preview"): GET
https://management.azure.com/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/providers/Microsoft.MachineLearningServices/locations/canadacentral/workspaceOperationsStatus/r8_Lpdii3X_RE8wAqbmFEOv_KpcPh4GztSrEKa4I8_8
--------------------------------------------------------------------------------
RESPONSE 200: 200 OK
ERROR CODE: BadRequest
--------------------------------------------------------------------------------
{
  "status": "Failed",
  "error": {
    "code": "BadRequest",
    "message": "User assigned identity doesn't have enough permissions. Details: The client '6c587184-1d1c-4dbb-aa2a-e65af87ae24b' with object id '6c587184-1d1c-4dbb-aa2a-e65af87ae24b' does not have authorization to perform action 'Microsoft.KeyVault/vaults/read' over scope '/subscriptions/5784b6a5-de3f-4fa4-8b8f-e5bb70ff6b25/resourceGroups/rg-aml-ws-prod-cc01/providers/Microsoft.KeyVault/vaults/kvprodcc01' or the scope is invalid. If access was recently granted, please refresh your credentials."
  }
}
--------------------------------------------------------------------------------

